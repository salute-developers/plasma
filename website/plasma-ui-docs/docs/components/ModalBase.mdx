---
id: modalBase
title: ModalBase
---

import { PropsTable, Description, StorybookLink } from '@site/src/components';

# Popover
<Description name="ModalBase" />
<PropsTable name="ModalBase" />
<StorybookLink name="ModalBase" />

### Использование

Перед использованием убедитесь, что `PopupBaseProvider` подключен.
Компонент ModalBase во многом схож с PopupBase, добавляет при этом подложку(`overlay`), а также блокирует скролл и фокус.
На данный момент для определения цвета подложки необходимо прокинуть глобальные стили:

``` tsx
const ModalOverlayVariables = createGlobalStyle`
    body {
        --plasma-modal-blur-overlay-color: ${darkOverlayBlur};
        --plasma-modal-overlay-color: ${overlaySoft};
    }
`;
```

```tsx live
import React from 'react';
import styled, { createGlobalStyle } from 'styled-components';
import { surfaceSolid02, darkOverlayBlur, overlaySoft } from '@salutejs/plasma-tokens';
import { SSRProvider, Button, ModalBase, useModalAnimation, PopupBaseProvider } from '@salutejs/plasma-ui';

const StyledButton = styled(Button)`
    margin-top: 1rem;
    width: 15rem;
`;

const StyledWrapper = styled.div`
    height: 1200px;
`;

const ModalOverlayVariables = createGlobalStyle`
    body {
        --plasma-modal-blur-overlay-color: ${darkOverlayBlur};
        --plasma-modal-overlay-color: ${overlaySoft};
    }
`;

const Content = styled.div`
    background: ${surfaceSolid02};
    padding: 1rem;
`;

const StyledModal = styled(ModalBase)`
    & > .popup-base-root,
    .modal-base-overlay {
        animation: ${({ theme, withAnimation, animationInfo }) =>
            /* eslint-disable-next-line no-nested-ternary */
            theme.lowPerformance || !withAnimation
                ? 'unset'
                : animationInfo?.endAnimation
                ? 'fadeOut 1s forwards'
                : 'fadeIn 1s forwards'};

        @keyframes fadeIn {
            from {
                opacity: 0;
            }

            to {
                opacity: 1;
            }
        }

        @keyframes fadeOut {
            from {
                opacity: 1;
            }

            to {
                opacity: 0;
            }
        }
    }
`;

export const App {
    const [isOpenA, setIsOpenA] = React.useState(false);
    const [isOpenB, setIsOpenB] = React.useState(false);
    const [isOpenC, setIsOpenC] = React.useState(false);

    const animationInfo = useModalAnimation();

    return (
        <SSRProvider>
            <StyledWrapper>
                <ModalOverlayVariables />
                <PopupBaseProvider>
                    <div style={{ display: 'flex', flexDirection: 'column' }}>
                        <StyledButton text="Открыть A" onClick={() => setIsOpenA(true)} />
                    </div>
                    <StyledModal
                        id="modalA"
                        animationInfo={animationInfo}
                        withAnimation
                        onClose={() => setIsOpenA(false)}
                        isOpen={isOpenA}
                        placement="center"
                        offset={[0, 0]}
                    >
                        <Content>
                            <Button onClick={() => setIsOpenA(false)}>Close</Button>
                            <div style={{ display: 'flex', flexDirection: 'column' }}>
                                <StyledButton text="Открыть B" onClick={() => setIsOpenB(true)} />
                            </div>
                            <ModalBase
                                id="modalB"
                                onClose={() => setIsOpenB(false)}
                                isOpen={isOpenB}
                                placement="left"
                                offset={[0, 0]}
                            >
                                <Content>
                                    <Button style={{ marginRight: '1rem' }} onClick={() => setIsOpenB(false)}>
                                        Close
                                    </Button>
                                    <div style={{ display: 'flex', flexDirection: 'column' }}>
                                        <StyledButton text="Открыть C" onClick={() => setIsOpenC(true)} />
                                    </div>
                                    <ModalBase
                                        id="modalC"
                                        onClose={() => setIsOpenC(false)}
                                        isOpen={isOpenC}
                                        placement="top"
                                        offset={[0, 0]}
                                    >
                                        <Content>
                                            <Button style={{ marginRight: '1rem' }} onClick={() => setIsOpenC(false)}>
                                                Close
                                            </Button>
                                            <>Content</>
                                        </Content>
                                    </ModalBase>
                                </Content>
                            </ModalBase>
                        </Content>
                    </StyledModal>
                </PopupBaseProvider>
            </StyledWrapper>
        </SSRProvider>
    );
};
```

## Подключение анимации

Подключение анимации аналогично тому, как это происходит в `PopupBase`.
Однако подключение анимации происходит с помощью хука `useModalAnimation`.
Также необходимо выставить флаг `withAnimation`. 
Для добавления анимации в оверлей необходимо использовать класс `.modal-base-overlay`.
Пример:

```tsx
const StyledModal = styled(ModalBase)`
    & > .popup-base-root,
    .modal-base-overlay {
        animation: ${({ theme, withAnimation, animationInfo }) =>
            theme.lowPerformance || !withAnimation
                ? 'unset'
                : animationInfo?.endAnimation
                ? 'fadeOut 1s forwards'
                : 'fadeIn 1s forwards'};

        @keyframes fadeIn {
            from {
                opacity: 0;
            }

            to {
                opacity: 1;
            }
        }

        @keyframes fadeOut {
            from {
                opacity: 1;
            }

            to {
                opacity: 0;
            }
        }
    }
`;
```

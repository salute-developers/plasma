// generated by theme-builder { version } { plasma-hope-version??? }

import React, { useState } from 'react';
import { ComponentStory, ComponentMeta } from '@storybook/react';

import { tabsConfig } from '../../../../components/Tabs';
import { mergeConfig } from '../../../../engines';
import { argTypesFromConfig } from '../../../_helpers';

import { config } from './Tabs.config';
import { Tabs } from './Tabs';
import { TabItem } from './TabItem';

export default {
    title: 'plasma-new-hope/Tabs',
    component: Tabs,
    argTypes: {
        ...argTypesFromConfig(mergeConfig(tabsConfig, config)),
    },
} as ComponentMeta<typeof Tabs>;

export const Default: ComponentStory<typeof Tabs> = (props) => {
    const { itemsNumber, label, disabled, stretch } = props;
    const items = Array(itemsNumber).fill(0);
    const [index, setIndex] = useState(0);

    return (
        <div style={{ padding: '1rem' }}>
            <Tabs stretch={stretch.toString()} disabled={disabled}>
                {items.map((_, i) => (
                    <TabItem
                        key={`item:${i}`}
                        isActive={(i === index).toString()}
                        onClick={() => !disabled && setIndex(i)}
                        tabIndex={!disabled ? i : -1}
                        disabled={disabled}
                    >
                        {label}
                    </TabItem>
                ))}
            </Tabs>
        </div>
    );
};

Default.args = {
    itemsNumber: 4,
    disabled: false,
    stretch: false,
    label: 'Label',
};
